// Generated by CoffeeScript 1.4.0
(function() {
  var currentRound, getDetails;

  currentRound = -1;

  getDetails = function() {
    return $.getJSON('/details', function(data) {
      var header, i, item, row, table, value, _i, _j, _k, _len, _ref, _ref1, _ref2;
      table = $('.branches');
      table.children().remove();
      header = $("<tr>");
      header.append("<th>Teams</th>");
      for (i = _i = 0, _ref = data.round; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
        header.append("<th>" + i + "</th>");
      }
      table.append(header);
      _ref1 = data.branches;
      for (_j = 0, _len = _ref1.length; _j < _len; _j++) {
        item = _ref1[_j];
        row = $("<tr>");
        row.append("<td>" + item.name + "</td>");
        for (i = _k = 0, _ref2 = data.round; 0 <= _ref2 ? _k <= _ref2 : _k >= _ref2; i = 0 <= _ref2 ? ++_k : --_k) {
          value = item[i] ? "tick" : "cross";
          row.append("<td><img src='/images/" + value + ".png' height='25' width='25' /></td>");
        }
        table.append(row);
      }
      if (currentRound !== data.round) {
        currentRound = data.round;
        $('.roundNumber').text(currentRound);
        return $.get('/question', function(data) {
          var instructions;
          instructions = $('.instructions');
          instructions.children().remove();
          return instructions.append(data);
        });
      }
    });
  };

  $(function() {
    getDetails();
    return setInterval(getDetails, 500);
  });

}).call(this);
